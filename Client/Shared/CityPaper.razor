@using FakeCitySite.Shared
<MudPaper Elevation="4" @onclick="CardClickedCallback" Class="pa-3" Style=@($"background:{BackgroundColor}; cursor: pointer")>
    <MudText Style="color: whitesmoke" Inline="true">@City?.Name</MudText>
                @if(City?.Country != null)
                {
                    <MudText Style="color: #b5b5b5" Inline="true">, @City.Country</MudText>
                }
                else
                {
                    <MudText Style="color: #b5b5b5" Inline="true"> (Unspecified)</MudText>
                }
                @if (revealed)
                {
                    @if (!City.IsReal)
                    {
                        <MudText Style="color: whitesmoke">This has fooled @City.TimesChosen people!</MudText>
                    }
                    else
                    {
                        <MudText Style="color: whitesmoke">@City.TimesChosen other people recognized this real city</MudText>
                    }
                }
            </MudPaper>
@code {
    [Parameter]
    public EventCallback CardClickedCallback { get; set; }
    
    [Parameter]
    public City City { get; set; }

    public string BackgroundColor { get; set; } = Color.Tertiary.ToString();

    private bool revealed;
    
    public bool RevealTruth()
    {
        if (City.IsReal)
            BackgroundColor = Colors.Green.Default;
        else
            BackgroundColor = Colors.Red.Default;
        revealed = true;
        return City.IsReal;
    }

    public void Reset()
    {
        revealed = false;
        BackgroundColor = Colors.DeepPurple.Darken2;
    }
}